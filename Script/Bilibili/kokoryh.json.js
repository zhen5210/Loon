// Build: 2025/7/6 19:12:56
(()=>{var p=class o{static getInstance(e){let t="Surge";return typeof $loon<"u"?t="Loon":typeof $task<"u"&&(t="QuantumultX"),o.instances[t]||(o.instances[t]=o.classNames[t](e,t)),o.instances[t]}static classNames={Surge:(e,t)=>new h(e,t),Loon:(e,t)=>new R(e,t),QuantumultX:(e,t)=>new H(e,t)};static instances={};className;name;logLevel=1;request;response;argument;constructor(e,t){this.className=t??"",this.name=e??"",this.init()}createProxy(e){return new Proxy(e,{get:this.getFn,set:this.setFn})}getFn(e,t,i){return Reflect.get(e,t,i)}setFn(e,t,i,s){return Reflect.set(e,t,i,s),!0}getJSON(e){let t=this.getVal(e);return t?JSON.parse(t):null}setJSON(e,t){this.setVal(JSON.stringify(e),t)}log(e){typeof e=="object"&&(e=JSON.stringify(e)),console.log(e)}info(e){this.logLevel>1||this.log(e)}debug(e){this.logLevel>0||this.log(e)}exit(){$done({})}abort(){$done()}},h=class o extends p{static propertyMap={bodyBytes:"body"};getFn(e,t,i){let s=o.propertyMap[t]||t;return super.getFn(e,s,i)}setFn(e,t,i,s){let n=o.propertyMap[t]||t;return super.setFn(e,n,i,s)}init(){typeof $request=="object"&&(this.request=this.createProxy($request)),typeof $response=="object"&&(this.response=this.createProxy($response)),typeof $argument=="string"&&(this.argument=JSON.parse($argument),"logLevel"in this.argument&&(this.logLevel=Number(this.argument.logLevel)))}getVal(e){return $persistentStore.read(e)}setVal(e,t){return $persistentStore.write(e,t)}fetch(e){let{method:t,body:i,timeout:s=5,...n}=e;return new Promise((a,l)=>{$httpClient[t]({...n,body:i,"binary-mode":i instanceof Uint8Array,timeout:s},(c,u,b)=>{if(c)return l(c);let T=b instanceof Uint8Array?"bodyBytes":"body";a({status:u.status,headers:u.headers,[T]:b})})})}msg(e=this.name,t="",i="",s={}){let{openUrl:n,clipboard:a,mediaUrl:l,dismiss:c,sound:u=!0}=s,b={url:n,text:a,"media-url":l,"auto-dismiss":c,sound:u};n?b.action="open-url":a&&(b.action="clipboard"),$notification.post(e,t,i,b)}done(e){$done(e)}abort(){$done({abort:!0})}},R=class extends h{init(){super.init(),typeof $argument=="object"&&(this.argument=$argument,"logLevel"in this.argument&&(this.logLevel=Number(this.argument.logLevel)))}fetch(e){return e.timeout=(e.timeout??5)*1e3,super.fetch(e)}msg(e=this.name,t="",i="",s={}){let{openUrl:n,mediaUrl:a,clipboard:l,delay:c}=s,u={openUrl:n,mediaUrl:a,clipboard:l};$notification.post(e,t,i,u,c)}abort(){$done()}},H=class o extends p{static propertyMap={status:"statusCode"};static toUint8Array(e){return e&&new Uint8Array(e)}static toArrayBuffer(e){return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)}getFn(e,t,i){let s=o.propertyMap[t]||t,n=super.getFn(e,s,i);return t==="bodyBytes"?o.toUint8Array(n):n}init(){typeof $request=="object"&&(this.request=this.createProxy($request)),typeof $response=="object"&&(this.response=this.createProxy($response))}getVal(e){return $prefs.valueForKey(e)}setVal(e,t){return $prefs.setValueForKey(e,t)}fetch(e){let t={url:"",method:"GET"};for(let[i,s]of Object.entries(e))i==="body"&&s instanceof Uint8Array?t.bodyBytes=o.toArrayBuffer(s):i==="method"?t.method=s.toUpperCase():t[i]=s;return new Promise((i,s)=>{$task.fetch(t).then(n=>{i(this.createProxy(n))},n=>{s(n)})})}msg(e=this.name,t="",i="",s={}){let{openUrl:n,mediaUrl:a,clipboard:l}=s,c={"open-url":n,"media-url":a,"update-pasteboard":l};$notify(e,t,i,c)}done(e){let t=e.response??e,i={};for(let[s,n]of Object.entries(t))s==="status"?i.status=`HTTP/1.1 ${n}`:s==="body"&&n instanceof Uint8Array?i.bodyBytes=o.toArrayBuffer(n):i[s]=n;$done(i)}};var F=class{},g=class extends F{message;constructor(e){super(),this.message=this.fromJsonString(e)}fromJsonString(e){return JSON.parse(e)}toJsonString(){return JSON.stringify(this.message)}};var S={live:"\u76F4\u64AD",for_you:"\u63A8\u8350",trending:"\u70ED\u95E8",anime:"\u52A8\u753B",film:"\u5F71\u89C6",messages:"\u6D88\u606F",home:"\u9996\u9875",following:"\u52A8\u6001",me:"\u6211\u7684",downloads:"\u79BB\u7EBF\u7F13\u5B58",history:"\u5386\u53F2\u8BB0\u5F55",my_favorites:"\u6211\u7684\u6536\u85CF",watch_later:"\u7A0D\u540E\u518D\u770B",creator_hub:"\u521B\u4F5C\u4E2D\u5FC3",data_center:"\u6570\u636E\u4E2D\u5FC3",host_center:"\u4E3B\u64AD\u4E2D\u5FC3",live_data:"\u76F4\u64AD\u6570\u636E",upload:"\u53D1\u5E03",recommended_services:"\u63A8\u8350\u670D\u52A1",customization:"\u4E2A\u6027\u88C5\u626E",mall:"\u4F1A\u5458\u8D2D",my_wallet:"\u6211\u7684\u94B1\u5305",live_studio:"\u6211\u7684\u76F4\u64AD",more_services:"\u66F4\u591A\u670D\u52A1",help_center:"\u8054\u7CFB\u5BA2\u670D",settings:"\u8BBE\u7F6E"};var $={live:"Live",for_you:"For You",trending:"Trending",anime:"Anime",film:"Film & TV",messages:"Messages",home:"Home",following:"Following",me:"Me",downloads:"Downloads",my_favorites:"My Favorites",history:"History",watch_later:"Watch Later",creator_hub:"Creator Hub",data_center:"Data Center",host_center:"Host Center",live_data:"Live Data",upload:"Upload",recommended_services:"Recommended Services",customization:"Customization",mall:"Mall",my_wallet:"My Wallet",live_studio:"Live Studio",more_services:"More Services",help_center:"Help Center",settings:"Settings"};var m={zhCN:S,enUS:$};var r=p.getInstance("Bilibili Json"),d=class extends g{options={showCreatorHub:!1};constructor(){super(r.response.body),this.message.data||r.exit(),Object.assign(this.options,r.argument)}done(){this.process(),r.done({body:this.toJsonString()})}isEn(){return!!new URL(r.request.url).searchParams.get("s_locale")?.startsWith("en")}},_=class extends d{i18n=this.isEn()?m.enUS:m.zhCN;layoutData={tab:[{pos:1,id:731,name:this.i18n.live,tab_id:"\u76F4\u64ADtab",uri:"bilibili://live/home"},{pos:2,id:477,name:this.i18n.for_you,tab_id:"\u63A8\u8350tab",uri:"bilibili://pegasus/promo",default_selected:1},{pos:3,id:478,name:this.i18n.trending,tab_id:"\u70ED\u95E8tab",uri:"bilibili://pegasus/hottopic"},{pos:4,id:545,name:this.i18n.anime,tab_id:"bangumi",uri:"bilibili://pgc/home"},{pos:5,id:151,name:this.i18n.film,tab_id:"film",uri:"bilibili://pgc/cinema-tab"}],top:[{pos:1,id:176,name:this.i18n.messages,tab_id:"\u6D88\u606FTop",uri:"bilibili://link/im_home",icon:"http://i0.hdslb.com/bfs/archive/d43047538e72c9ed8fd8e4e34415fbe3a4f632cb.png"}],bottom:[{pos:1,id:177,name:this.i18n.home,tab_id:"home",uri:"bilibili://main/home/",icon:"http://i0.hdslb.com/bfs/archive/63d7ee88d471786c1af45af86e8cb7f607edf91b.png",icon_selected:"http://i0.hdslb.com/bfs/archive/e5106aa688dc729e7f0eafcbb80317feb54a43bd.png"},{pos:2,id:179,name:this.i18n.following,tab_id:"dynamic",uri:"bilibili://following/home/",icon:"http://i0.hdslb.com/bfs/archive/86dfbe5fa32f11a8588b9ae0fccb77d3c27cedf6.png",icon_selected:"http://i0.hdslb.com/bfs/archive/25b658e1f6b6da57eecba328556101dbdcb4b53f.png"},{pos:5,id:181,name:this.i18n.me,tab_id:"\u6211\u7684Bottom",uri:"bilibili://user_center/",icon:"http://i0.hdslb.com/bfs/archive/4b0b2c49ffeb4f0c2e6a4cceebeef0aab1c53fe1.png",icon_selected:"http://i0.hdslb.com/bfs/archive/a54a8009116cb896e64ef14dcf50e5cade401e00.png"}]};process(){let{data:e}=this.message;Object.assign(e,this.layoutData)}},y=class extends d{keyList=["show","event_list"];process(){let{data:e}=this.message;this.keyList.forEach(t=>{e[t]&&(e[t]=[])})}},v=class extends d{typeSet=new Set(["small_cover_v2","large_cover_single_v9","large_cover_v1"]);process(){let{data:e}=this.message;Array.isArray(e.items)&&(e.items=e.items.filter(t=>!t.banner_item&&!t.ad_info&&t.card_goto==="av"&&this.typeSet.has(t.card_type)))}},x=class extends d{process(){let{data:e}=this.message;Array.isArray(e.items)&&(e.items=e.items.reduce((t,i)=>(!i.ad_info&&!i.card_goto?.startsWith("ad")&&(delete i.story_cart_icon,delete i.free_flow_toast,t.push(i)),t),[]))}},f=class o extends d{static getHundredAnnualVipData(){let e=this.getVipImage();return{status:1,type:2,vip_pay_type:0,due_date:90052704e5,tv_vip_status:1,tv_vip_pay_type:0,tv_due_date:90052704e5,role:15,theme_type:0,nickname_color:"#FB7299",avatar_subscript:1,avatar_subscript_url:"",avatar_icon:{icon_resource:{}},label:{path:"",text:"\u767E\u5E74\u5927\u4F1A\u5458",label_theme:"hundred_annual_vip",text_color:"#FFFFFF",bg_style:1,bg_color:"#FB7299",border_color:"",use_img_label:!0,image:e,img_label_uri_hans:"",img_label_uri_hant:"",img_label_uri_hans_static:e,img_label_uri_hant_static:e}}}static getVipImage(){let e=new Date,t=e.getMonth()+1,i=e.getDate();switch(`${t}/${i}`){case"6/1":return"https://i0.hdslb.com/bfs/bangumi/kt/d2d09af98bd5aaead93493df9a20a73b474672f7.png";default:return"https://i0.hdslb.com/bfs/vip/52f60c8bdae8d4440edbb96dad72916022adf126.png"}}i18n=this.isEn()?m.enUS:m.zhCN;sectionMap={sections_v2:[{items:[{id:396,title:this.i18n.downloads,uri:"bilibili://user_center/download",icon:"http://i0.hdslb.com/bfs/archive/5fc84565ab73e716d20cd2f65e0e1de9495d56f8.png",common_op_item:{}},{id:397,title:this.i18n.history,uri:"bilibili://user_center/history",icon:"http://i0.hdslb.com/bfs/archive/8385323c6acde52e9cd52514ae13c8b9481c1a16.png",common_op_item:{}},{id:3072,title:this.i18n.my_favorites,uri:"bilibili://user_center/favourite?version=2",icon:"http://i0.hdslb.com/bfs/archive/d79b19d983067a1b91614e830a7100c05204a821.png",common_op_item:{}},{id:2830,title:this.i18n.watch_later,uri:"bilibili://user_center/watch_later_v2",icon:"http://i0.hdslb.com/bfs/archive/63bb768caa02a68cb566a838f6f2415f0d1d02d6.png",need_login:1,common_op_item:{}}],style:1,button:{}},{title:this.i18n.recommended_services,items:[{id:402,title:this.i18n.customization,uri:"https://www.bilibili.com/h5/mall/home?navhide=1&f_source=shop&from=myservice",icon:"http://i0.hdslb.com/bfs/archive/0bcad10661b50f583969b5a188c12e5f0731628c.png",common_op_item:{}},{id:622,title:this.i18n.mall,uri:"bilibili://mall/home",icon:"http://i0.hdslb.com/bfs/archive/19c794f01def1a267b894be84427d6a8f67081a9.png",common_op_item:{}},{id:404,title:this.i18n.my_wallet,uri:"bilibili://bilipay/mine_wallet",icon:"http://i0.hdslb.com/bfs/archive/f416634e361824e74a855332b6ff14e2e7c2e082.png",common_op_item:{}},{id:406,title:this.i18n.live_studio,uri:"bilibili://user_center/live_center",icon:"http://i0.hdslb.com/bfs/archive/1db5791746a0112890b77a0236baf263d71ecb27.png",common_op_item:{}}],style:1,button:{}},{title:this.i18n.more_services,items:[{id:407,title:this.i18n.help_center,uri:"bilibili://user_center/feedback",icon:"http://i0.hdslb.com/bfs/archive/7ca840cf1d887a45ee1ef441ab57845bf26ef5fa.png",common_op_item:{}},{id:410,title:this.i18n.settings,uri:"bilibili://user_center/setting",icon:"http://i0.hdslb.com/bfs/archive/e932404f2ee62e075a772920019e9fbdb4b5656a.png",common_op_item:{}}],style:2,button:{}}],ipad_sections:[{id:747,title:"\u79BB\u7EBF\u7F13\u5B58",uri:"bilibili://user_center/download",icon:"http://i0.hdslb.com/bfs/feed-admin/9bd72251f7366c491cfe78818d453455473a9678.png",mng_resource:{icon_id:0,icon:""}},{id:748,title:"\u5386\u53F2\u8BB0\u5F55",uri:"bilibili://user_center/history",icon:"http://i0.hdslb.com/bfs/feed-admin/83862e10685f34e16a10cfe1f89dbd7b2884d272.png",mng_resource:{icon_id:0,icon:""}},{id:749,title:"\u6211\u7684\u6536\u85CF",uri:"bilibili://user_center/favourite",icon:"http://i0.hdslb.com/bfs/feed-admin/6ae7eff6af627590fc4ed80c905e9e0a6f0e8188.png",mng_resource:{icon_id:0,icon:""}},{id:750,title:"\u7A0D\u540E\u518D\u770B",uri:"bilibili://user_center/watch_later",icon:"http://i0.hdslb.com/bfs/feed-admin/928ba9f559b02129e51993efc8afe95014edec94.png",mng_resource:{icon_id:0,icon:""}}],ipad_upper_sections:[{id:752,title:"\u521B\u4F5C\u9996\u9875",uri:"/uper/homevc",icon:"http://i0.hdslb.com/bfs/feed-admin/d20dfed3b403c895506b1c92ecd5874abb700c01.png",mng_resource:{icon_id:0,icon:""}}],ipad_recommend_sections:[{id:755,title:"\u6211\u7684\u5173\u6CE8",uri:"bilibili://user_center/myfollows",icon:"http://i0.hdslb.com/bfs/feed-admin/fdd7f676030c6996d36763a078442a210fc5a8c0.png",mng_resource:{icon_id:0,icon:""}},{id:756,title:"\u6211\u7684\u6D88\u606F",uri:"bilibili://link/im_home",icon:"http://i0.hdslb.com/bfs/feed-admin/e1471740130a08a48b02a4ab29ed9d5f2281e3bf.png",mng_resource:{icon_id:0,icon:""}}],ipad_more_sections:[{id:763,title:"\u6211\u7684\u5BA2\u670D",uri:"bilibili://user_center/feedback",icon:"http://i0.hdslb.com/bfs/feed-admin/7801a6180fb67cf5f8ee05a66a4668e49fb38788.png",mng_resource:{icon_id:0,icon:""}},{id:764,title:"\u8BBE\u7F6E",uri:"bilibili://user_center/setting",icon:"http://i0.hdslb.com/bfs/feed-admin/34e8faea00b3dd78977266b58d77398b0ac9410b.png",mng_resource:{icon_id:0,icon:""}}]};creatorHubData={title:this.i18n.creator_hub,items:[{id:171,title:this.i18n.creator_hub,uri:"bilibili://uper/homevc",icon:"http://i0.hdslb.com/bfs/archive/d3aad2d07538d2d43805f1fa14a412d7a45cc861.png",need_login:1,global_red_dot:0,display:1,is_up_anchor:!0},{id:533,title:this.i18n.data_center,uri:"https://member.bilibili.com/york/data-center?navhide=1&from=profile",icon:"http://i0.hdslb.com/bfs/feed-admin/367204ba56004b1a78211ba27eefbf5b4cc53a35.png",need_login:1,global_red_dot:0,display:1},{id:707,title:this.i18n.host_center,uri:"https://live.bilibili.com/p/html/live-app-anchor-center/index.html?is_live_webview=1#/",icon:"http://i0.hdslb.com/bfs/feed-admin/48e17ccd0ce0cfc9c7826422d5e47ce98f064c2a.png",need_login:1,display:1},{id:2647,title:this.i18n.live_data,uri:"https://live.bilibili.com/p/html/live-app-data/index.html?source_tag=0&foreground=pink&is_live_webview=1&hybrid_set_header=2#/",icon:"https://i0.hdslb.com/bfs/legacy/0566b128c51d85b7ec545f318e1fd437d172dfea.png",display:1}],style:1,button:{text:this.i18n.upload,url:"bilibili://uper/user_center/archive_selection",icon:"http://i0.hdslb.com/bfs/archive/205f47675eaaca7912111e0e9b1ac94cb985901f.png",style:1},type:1,up_title:this.i18n.creator_hub};process(){let{showCreatorHub:e}=this.options,{data:t}=this.message;Object.entries(this.sectionMap).forEach(([i,s])=>{t[i]&&(t[i]=s)}),e&&t.sections_v2&&t.sections_v2.splice(1,0,this.creatorHubData),t.vip_type=2,t.vip=o.getHundredAnnualVipData(),delete t.answer,delete t.live_tip,delete t.vip_section,delete t.vip_section_v2,delete t.modular_vip_section}},w=class extends d{process(){let{data:e}=this.message;e.vip=f.getHundredAnnualVipData()}};var U={"/resource/show/tab/v2?":_,"/v2/splash":y,"/feed/index?":v,"/feed/index/story?":x,"/account/mine":f,"/account/myinfo?":w};function A(o){for(let[e,t]of Object.entries(U))if(o.includes(e))return new t;return null}try{A(r.request.url)?.done()}catch(o){r.info(o)}finally{r.exit()}})();
