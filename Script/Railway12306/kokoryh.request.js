// Build: 2025/7/7 22:48:43
(()=>{var v=Uint8Array,S=Uint16Array,bt=Int32Array,lt=new v([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ct=new v([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),St=new v([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vt=function(r,t){for(var e=new S(31),n=0;n<31;++n)e[n]=t+=1<<r[n-1];for(var i=new bt(e[30]),n=1;n<30;++n)for(var o=e[n];o<e[n+1];++o)i[o]=o-e[n]<<5|n;return{b:e,r:i}},pt=vt(lt,2),gt=pt.b,Tt=pt.r;gt[28]=258,Tt[258]=28;var yt=vt(ct,0),Ft=yt.b,It=yt.r,X=new S(32768);for(a=0;a<32768;++a)w=(a&43690)>>1|(a&21845)<<1,w=(w&52428)>>2|(w&13107)<<2,w=(w&61680)>>4|(w&3855)<<4,X[a]=((w&65280)>>8|(w&255)<<8)>>1;var w,a,M=function(r,t,e){for(var n=r.length,i=0,o=new S(t);i<n;++i)r[i]&&++o[r[i]-1];var f=new S(t);for(i=1;i<t;++i)f[i]=f[i-1]+o[i-1]<<1;var h;if(e){h=new S(1<<t);var l=15-t;for(i=0;i<n;++i)if(r[i])for(var p=i<<4|r[i],c=t-r[i],s=f[r[i]-1]++<<c,u=s|(1<<c)-1;s<=u;++s)h[X[s]>>l]=p}else for(h=new S(n),i=0;i<n;++i)r[i]&&(h[i]=X[f[r[i]-1]++]>>15-r[i]);return h},D=new v(288);for(a=0;a<144;++a)D[a]=8;var a;for(a=144;a<256;++a)D[a]=9;var a;for(a=256;a<280;++a)D[a]=7;var a;for(a=280;a<288;++a)D[a]=8;var a,mt=new v(32);for(a=0;a<32;++a)mt[a]=5;var a;var Ht=M(D,9,1);var qt=M(mt,5,1),Q=function(r){for(var t=r[0],e=1;e<r.length;++e)r[e]>t&&(t=r[e]);return t},y=function(r,t,e){var n=t/8|0;return(r[n]|r[n+1]<<8)>>(t&7)&e},V=function(r,t){var e=t/8|0;return(r[e]|r[e+1]<<8|r[e+2]<<16)>>(t&7)},Mt=function(r){return(r+7)/8|0},Dt=function(r,t,e){return(t==null||t<0)&&(t=0),(e==null||e>r.length)&&(e=r.length),new v(r.subarray(t,e))};var $t=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],m=function(r,t,e){var n=new Error(t||$t[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,m),!e)throw n;return n},Bt=function(r,t,e,n){var i=r.length,o=n?n.length:0;if(!i||t.f&&!t.l)return e||new v(0);var f=!e,h=f||t.i!=2,l=t.i;f&&(e=new v(i*3));var p=function(ut){var ft=e.length;if(ut>ft){var ht=new v(Math.max(ft*2,ut));ht.set(e),e=ht}},c=t.f||0,s=t.p||0,u=t.b||0,A=t.l,B=t.d,T=t.m,F=t.n,N=i*8;do{if(!A){c=y(r,s,1);var P=y(r,s+1,3);if(s+=3,P)if(P==1)A=Ht,B=qt,T=9,F=5;else if(P==2){var E=y(r,s,31)+257,tt=y(r,s+10,15)+4,et=E+y(r,s+5,31)+1;s+=14;for(var H=new v(et),Z=new v(19),g=0;g<tt;++g)Z[St[g]]=y(r,s+g*3,7);s+=tt*3;for(var rt=Q(Z),xt=(1<<rt)-1,zt=M(Z,rt,1),g=0;g<et;){var nt=zt[y(r,s,xt)];s+=nt&15;var d=nt>>4;if(d<16)H[g++]=d;else{var U=0,O=0;for(d==16?(O=3+y(r,s,3),s+=2,U=H[g-1]):d==17?(O=3+y(r,s,7),s+=3):d==18&&(O=11+y(r,s,127),s+=7);O--;)H[g++]=U}}var it=H.subarray(0,E),z=H.subarray(E);T=Q(it),F=Q(z),A=M(it,T,1),B=M(z,F,1)}else m(1);else{var d=Mt(s)+4,I=r[d-4]|r[d-3]<<8,j=d+I;if(j>i){l&&m(0);break}h&&p(u+I),e.set(r.subarray(d,j),u),t.b=u+=I,t.p=s=j*8,t.f=c;continue}if(s>N){l&&m(0);break}}h&&p(u+131072);for(var At=(1<<T)-1,Rt=(1<<F)-1,G=s;;G=s){var U=A[V(r,s)&At],b=U>>4;if(s+=U&15,s>N){l&&m(0);break}if(U||m(2),b<256)e[u++]=b;else if(b==256){G=s,A=null;break}else{var st=b-254;if(b>264){var g=b-257,q=lt[g];st=y(r,s,(1<<q)-1)+gt[g],s+=q}var k=B[V(r,s)&Rt],J=k>>4;k||m(3),s+=k&15;var z=Ft[J];if(J>3){var q=ct[J];z+=V(r,s)&(1<<q)-1,s+=q}if(s>N){l&&m(0);break}h&&p(u+131072);var ot=u+st;if(u<z){var at=o-z,Ut=Math.min(z,ot);for(at+u<0&&m(3);u<Ut;++u)e[u]=n[at+u]}for(;u<ot;++u)e[u]=e[u-z]}}t.l=A,t.p=G,t.b=u,t.f=c,A&&(c=1,t.m=T,t.d=B,t.n=F)}while(!c);return u!=e.length&&f?Dt(e,0,u):e.subarray(0,u)};var Ot=new v(0);var Lt=function(r){(r[0]!=31||r[1]!=139||r[2]!=8)&&m(6,"invalid gzip data");var t=r[3],e=10;t&4&&(e+=(r[10]|r[11]<<8)+2);for(var n=(t>>3&1)+(t>>4&1);n>0;n-=!r[e++]);return e+(t&2)},Ct=function(r){var t=r.length;return(r[t-4]|r[t-3]<<8|r[t-2]<<16|r[t-1]<<24)>>>0};function dt(r,t){var e=Lt(r);return e+8>r.length&&m(6,"invalid gzip data"),Bt(r.subarray(e,-8),{i:2},t&&t.out||new v(Ct(r)),t&&t.dictionary)}var Nt=typeof TextDecoder<"u"&&new TextDecoder,Pt=0;try{Nt.decode(Ot,{stream:!0}),Pt=1}catch{}var R=class r{static getInstance(t){let e="Surge";return typeof $loon<"u"?e="Loon":typeof $task<"u"&&(e="QuantumultX"),r.instances[e]||(r.instances[e]=r.classNames[e](t,e)),r.instances[e]}static classNames={Surge:(t,e)=>new L(t,e),Loon:(t,e)=>new W(t,e),QuantumultX:(t,e)=>new K(t,e)};static instances={};className;name;logLevel=1;request;response;argument;_url;get url(){return this._url||(this._url=new URL(this.request.url)),this._url}constructor(t,e){this.className=e??"",this.name=t??"",this.init()}createProxy(t){return new Proxy(t,{get:this.getFn,set:this.setFn})}getFn(t,e,n){return Reflect.get(t,e,n)}setFn(t,e,n,i){return Reflect.set(t,e,n,i),!0}getJSON(t){let e=this.getVal(t);return e?JSON.parse(e):null}setJSON(t,e){this.setVal(JSON.stringify(t),e)}log(t){typeof t=="object"&&(t=JSON.stringify(t)),console.log(t)}info(t){this.logLevel>1||this.log(t)}debug(t){this.logLevel>0||this.log(t)}exit(){$done({})}abort(){$done()}},L=class r extends R{static propertyMap={bodyBytes:"body"};getFn(t,e,n){let i=r.propertyMap[e]||e;return super.getFn(t,i,n)}setFn(t,e,n,i){let o=r.propertyMap[e]||e;return super.setFn(t,o,n,i)}init(){typeof $request=="object"&&(this.request=this.createProxy($request)),typeof $response=="object"&&(this.response=this.createProxy($response)),typeof $argument=="string"&&(this.argument=JSON.parse($argument),"logLevel"in this.argument&&(this.logLevel=Number(this.argument.logLevel)))}getVal(t){return $persistentStore.read(t)}setVal(t,e){return $persistentStore.write(t,e)}fetch(t){let{method:e,body:n,timeout:i=5,...o}=t;return new Promise((f,h)=>{$httpClient[e]({...o,body:n,"binary-mode":n instanceof Uint8Array,timeout:i},(l,p,c)=>{if(l)return h(l);let s=c instanceof Uint8Array?"bodyBytes":"body";f({status:p.status,headers:p.headers,[s]:c})})})}msg(t=this.name,e="",n="",i={}){let{openUrl:o,clipboard:f,mediaUrl:h,dismiss:l,sound:p=!0}=i,c={url:o,text:f,"media-url":h,"auto-dismiss":l,sound:p};o?c.action="open-url":f&&(c.action="clipboard"),$notification.post(t,e,n,c)}ungzip(t){return $utils.ungzip(t)}done(t){$done(t)}abort(){$done({abort:!0})}},W=class extends L{init(){super.init(),typeof $argument=="object"&&(this.argument=$argument,"logLevel"in this.argument&&(this.logLevel=Number(this.argument.logLevel)))}fetch(t){return t.timeout=(t.timeout??5)*1e3,super.fetch(t)}msg(t=this.name,e="",n="",i={}){let{openUrl:o,mediaUrl:f,clipboard:h,delay:l}=i,p={openUrl:o,mediaUrl:f,clipboard:h};$notification.post(t,e,n,p,l)}abort(){$done()}},K=class r extends R{static propertyMap={status:"statusCode"};static toUint8Array(t){return t&&new Uint8Array(t)}static toArrayBuffer(t){return t.buffer.slice(t.byteOffset,t.byteLength+t.byteOffset)}getFn(t,e,n){let i=r.propertyMap[e]||e,o=super.getFn(t,i,n);return e==="bodyBytes"?r.toUint8Array(o):o}init(){typeof $request=="object"&&(this.request=this.createProxy($request),this.request.headers=this.normalizeHeaders(this.request.headers)),typeof $response=="object"&&(this.response=this.createProxy($response))}getVal(t){return $prefs.valueForKey(t)}setVal(t,e){return $prefs.setValueForKey(t,e)}fetch(t){let e={url:"",method:"GET"};for(let[n,i]of Object.entries(t))n==="body"&&i instanceof Uint8Array?e.bodyBytes=r.toArrayBuffer(i):n==="method"?e.method=i.toUpperCase():e[n]=i;return new Promise((n,i)=>{$task.fetch(e).then(o=>{n(this.createProxy(o))},o=>{i(o)})})}msg(t=this.name,e="",n="",i={}){let{openUrl:o,mediaUrl:f,clipboard:h}=i,l={"open-url":o,"media-url":f,"update-pasteboard":h};$notify(t,e,n,l)}ungzip(t){return dt(t)}done(t){let e=t.response??t,n={};for(let[i,o]of Object.entries(e))i==="status"?n.status=`HTTP/1.1 ${o}`:i==="body"&&o instanceof Uint8Array?n.bodyBytes=r.toArrayBuffer(o):n[i]=o;$done(n)}normalizeHeaders(t){return Object.entries(t).reduce((e,[n,i])=>(e[n.toLowerCase()]=i,e),{})}};var $=class{},C=class extends ${message;constructor(t){super(),this.message=this.fromJsonString(t)}fromJsonString(t){return JSON.parse(t)}toJsonString(){return JSON.stringify(this.message)}};var x=R.getInstance("12306");function wt(r){return r.endsWith("/getAdList")?new Y(x.request.body):r.endsWith("/mgw.htm")?new _:null}var Y=class extends C{done(){x.done({response:{body:this.getResponseBody()}})}getResponseBody(){let{placementNo:t}=this.message;switch(t){case"0007":return'{"materialsList":[{"billMaterialsId":"1","filePath":"#","creativeType":1}],"advertParam":{"skipTime":1}}';case"G0054":return'{"code":"00","materialsList":[{}]}';default:return'{"code":"00","message":"0"}'}}},_=class extends ${filterList=["com.cars.otsmobile.newHomePageBussData"];done(){this.isAd()?x.abort():x.exit()}isAd(){let t=x.request.headers;return this.filterList.includes(t["operation-type"])}};try{wt(x.request.url)?.done()}catch(r){x.info(r)}finally{x.exit()}})();
