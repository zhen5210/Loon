// Build: 2025/7/6 10:22:36
(()=>{var c=class n{static getInstance(t){let e="Surge";return typeof $loon<"u"?e="Loon":typeof $task<"u"&&(e="QuantumultX"),n.instances[e]||(n.instances[e]=n.classNames[e](t,e)),n.instances[e]}static classNames={Surge:(t,e)=>new f(t,e),Loon:(t,e)=>new y(t,e),QuantumultX:(t,e)=>new h(t,e)};static instances={};className;name;logLevel=1;request;response;argument;constructor(t,e){this.className=e??"",this.name=t??"",this.init()}createProxy(t){return new Proxy(t,{get:this.getFn,set:this.setFn})}getFn(t,e,s){return Reflect.get(t,e,s)}setFn(t,e,s,r){return Reflect.set(t,e,s,r),!0}getJSON(t){let e=this.getVal(t);return e?JSON.parse(e):null}setJSON(t,e){this.setVal(JSON.stringify(t),e)}log(t){typeof t=="object"&&(t=JSON.stringify(t)),console.log(t)}info(t){this.logLevel>1||this.log(t)}debug(t){this.logLevel>0||this.log(t)}exit(){$done({})}abort(){$done()}},f=class n extends c{static propertyMap={bodyBytes:"body"};getFn(t,e,s){let r=n.propertyMap[e]||e;return super.getFn(t,r,s)}setFn(t,e,s,r){let o=n.propertyMap[e]||e;return super.setFn(t,o,s,r)}init(){typeof $request=="object"&&(this.request=this.createProxy($request)),typeof $response=="object"&&(this.response=this.createProxy($response)),typeof $argument=="string"&&(this.argument=JSON.parse($argument),"logLevel"in this.argument&&(this.logLevel=Number(this.argument.logLevel)))}getVal(t){return $persistentStore.read(t)}setVal(t,e){return $persistentStore.write(t,e)}fetch(t){let{method:e,body:s,timeout:r=5,...o}=t;return new Promise((a,p)=>{$httpClient[e]({...o,body:s,"binary-mode":s instanceof Uint8Array,timeout:r},(u,d,l)=>{if(u)return p(u);let x=l instanceof Uint8Array?"bodyBytes":"body";a({status:d.status,headers:d.headers,[x]:l})})})}msg(t=this.name,e="",s="",r={}){let{openUrl:o,clipboard:a,mediaUrl:p,dismiss:u,sound:d=!0}=r,l={url:o,text:a,"media-url":p,"auto-dismiss":u,sound:d};o?l.action="open-url":a&&(l.action="clipboard"),$notification.post(t,e,s,l)}done(t){$done(t)}abort(){$done({abort:!0})}},y=class extends f{init(){super.init(),typeof $argument=="object"&&(this.argument=$argument,"logLevel"in this.argument&&(this.logLevel=Number(this.argument.logLevel)))}fetch(t){return t.timeout=(t.timeout??5)*1e3,super.fetch(t)}msg(t=this.name,e="",s="",r={}){let{openUrl:o,mediaUrl:a,clipboard:p,delay:u}=r,d={openUrl:o,mediaUrl:a,clipboard:p};$notification.post(t,e,s,d,u)}abort(){$done()}},h=class n extends c{static propertyMap={status:"statusCode"};static toUint8Array(t){return t&&new Uint8Array(t)}static toArrayBuffer(t){return t.buffer.slice(t.byteOffset,t.byteLength+t.byteOffset)}getFn(t,e,s){let r=n.propertyMap[e]||e,o=super.getFn(t,r,s);return e==="bodyBytes"?n.toUint8Array(o):o}init(){typeof $request=="object"&&(this.request=this.createProxy($request)),typeof $response=="object"&&(this.response=this.createProxy($response))}getVal(t){return $prefs.valueForKey(t)}setVal(t,e){return $prefs.setValueForKey(t,e)}fetch(t){let e={url:"",method:"GET"};for(let[s,r]of Object.entries(t))s==="body"&&r instanceof Uint8Array?e.bodyBytes=n.toArrayBuffer(r):s==="method"?e.method=r.toUpperCase():e[s]=r;return new Promise((s,r)=>{$task.fetch(e).then(o=>{s(this.createProxy(o))},o=>{r(o)})})}msg(t=this.name,e="",s="",r={}){let{openUrl:o,mediaUrl:a,clipboard:p}=r,u={"open-url":o,"media-url":a,"update-pasteboard":p};$notify(t,e,s,u)}done(t){let e=t.response??t,s={};for(let[r,o]of Object.entries(e))r==="status"?s.status=`HTTP/1.1 ${o}`:r==="body"&&o instanceof Uint8Array?s.bodyBytes=n.toArrayBuffer(o):s[r]=o;$done(s)}};var g=class{},m=class extends g{message;constructor(t){super(),this.message=this.fromJsonString(t)}fromJsonString(t){return JSON.parse(t)}toJsonString(){return JSON.stringify(this.message)}};var i=c.getInstance("12306");function v(n){return n.endsWith("/getAdList")?new b(i.request.body):n.endsWith("/mgw.htm")?new R:null}var b=class extends m{done(){i.done({response:{body:this.getResponseBody()}})}getResponseBody(){let{placementNo:t}=this.message;switch(t){case"0007":return'{"materialsList":[{"billMaterialsId":"1","filePath":"#","creativeType":1}],"advertParam":{"skipTime":1}}';case"G0054":return'{"code":"00","materialsList":[{}]}';default:return'{"code":"00","message":"0"}'}}},R=class extends g{filterList=["com.cars.otsmobile.newHomePageBussData"];done(){this.isAd()?i.abort():i.exit()}isAd(){let t=i.request.headers;return this.filterList.includes(t["operation-type"])}};try{v(i.request.url)?.done()}catch(n){i.info(n)}finally{i.exit()}})();
