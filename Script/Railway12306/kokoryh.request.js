// Build: 2025/7/11 21:25:16
(()=>{var v=Uint8Array,T=Uint16Array,bt=Int32Array,ht=new v([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ct=new v([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Tt=new v([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vt=function(r,t){for(var e=new T(31),n=0;n<31;++n)e[n]=t+=1<<r[n-1];for(var i=new bt(e[30]),n=1;n<30;++n)for(var s=e[n];s<e[n+1];++s)i[s]=s-e[n]<<5|n;return{b:e,r:i}},pt=vt(ht,2),gt=pt.b,St=pt.r;gt[28]=258,St[258]=28;var yt=vt(ct,0),Ft=yt.b,Nt=yt.r,V=new T(32768);for(f=0;f<32768;++f)x=(f&43690)>>1|(f&21845)<<1,x=(x&52428)>>2|(x&13107)<<2,x=(x&61680)>>4|(x&3855)<<4,V[f]=((x&65280)>>8|(x&255)<<8)>>1;var x,f,q=function(r,t,e){for(var n=r.length,i=0,s=new T(t);i<n;++i)r[i]&&++s[r[i]-1];var a=new T(t);for(i=1;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;var l;if(e){l=new T(1<<t);var h=15-t;for(i=0;i<n;++i)if(r[i])for(var p=i<<4|r[i],c=t-r[i],o=a[r[i]-1]++<<c,u=o|(1<<c)-1;o<=u;++o)l[V[o]>>h]=p}else for(l=new T(n),i=0;i<n;++i)r[i]&&(l[i]=V[a[r[i]-1]++]>>15-r[i]);return l},L=new v(288);for(f=0;f<144;++f)L[f]=8;var f;for(f=144;f<256;++f)L[f]=9;var f;for(f=256;f<280;++f)L[f]=7;var f;for(f=280;f<288;++f)L[f]=8;var f,mt=new v(32);for(f=0;f<32;++f)mt[f]=5;var f;var Mt=q(L,9,1);var Dt=q(mt,5,1),X=function(r){for(var t=r[0],e=1;e<r.length;++e)r[e]>t&&(t=r[e]);return t},y=function(r,t,e){var n=t/8|0;return(r[n]|r[n+1]<<8)>>(t&7)&e},J=function(r,t){var e=t/8|0;return(r[e]|r[e+1]<<8|r[e+2]<<16)>>(t&7)},qt=function(r){return(r+7)/8|0},Lt=function(r,t,e){return(t==null||t<0)&&(t=0),(e==null||e>r.length)&&(e=r.length),new v(r.subarray(t,e))};var Ht=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],m=function(r,t,e){var n=new Error(t||Ht[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,m),!e)throw n;return n},$t=function(r,t,e,n){var i=r.length,s=n?n.length:0;if(!i||t.f&&!t.l)return e||new v(0);var a=!e,l=a||t.i!=2,h=t.i;a&&(e=new v(i*3));var p=function(ft){var ut=e.length;if(ft>ut){var lt=new v(Math.max(ut*2,ft));lt.set(e),e=lt}},c=t.f||0,o=t.p||0,u=t.b||0,R=t.l,$=t.d,S=t.m,F=t.n,C=i*8;do{if(!R){c=y(r,o,1);var I=y(r,o+1,3);if(o+=3,I)if(I==1)R=Mt,$=Dt,S=9,F=5;else if(I==2){var E=y(r,o,31)+257,tt=y(r,o+10,15)+4,et=E+y(r,o+5,31)+1;o+=14;for(var M=new v(et),Z=new v(19),g=0;g<tt;++g)Z[Tt[g]]=y(r,o+g*3,7);o+=tt*3;for(var rt=X(Z),xt=(1<<rt)-1,zt=q(Z,rt,1),g=0;g<et;){var nt=zt[y(r,o,xt)];o+=nt&15;var d=nt>>4;if(d<16)M[g++]=d;else{var U=0,P=0;for(d==16?(P=3+y(r,o,3),o+=2,U=M[g-1]):d==17?(P=3+y(r,o,7),o+=3):d==18&&(P=11+y(r,o,127),o+=7);P--;)M[g++]=U}}var it=M.subarray(0,E),z=M.subarray(E);S=X(it),F=X(z),R=q(it,S,1),$=q(z,F,1)}else m(1);else{var d=qt(o)+4,N=r[d-4]|r[d-3]<<8,j=d+N;if(j>i){h&&m(0);break}l&&p(u+N),e.set(r.subarray(d,j),u),t.b=u+=N,t.p=o=j*8,t.f=c;continue}if(o>C){h&&m(0);break}}l&&p(u+131072);for(var Rt=(1<<S)-1,At=(1<<F)-1,G=o;;G=o){var U=R[J(r,o)&Rt],b=U>>4;if(o+=U&15,o>C){h&&m(0);break}if(U||m(2),b<256)e[u++]=b;else if(b==256){G=o,R=null;break}else{var st=b-254;if(b>264){var g=b-257,D=ht[g];st=y(r,o,(1<<D)-1)+gt[g],o+=D}var k=$[J(r,o)&At],Q=k>>4;k||m(3),o+=k&15;var z=Ft[Q];if(Q>3){var D=ct[Q];z+=J(r,o)&(1<<D)-1,o+=D}if(o>C){h&&m(0);break}l&&p(u+131072);var ot=u+st;if(u<z){var at=s-z,Ut=Math.min(z,ot);for(at+u<0&&m(3);u<Ut;++u)e[u]=n[at+u]}for(;u<ot;++u)e[u]=e[u-z]}}t.l=R,t.p=G,t.b=u,t.f=c,R&&(c=1,t.m=S,t.d=$,t.n=F)}while(!c);return u!=e.length&&a?Lt(e,0,u):e.subarray(0,u)};var Pt=new v(0);var Ot=function(r){(r[0]!=31||r[1]!=139||r[2]!=8)&&m(6,"invalid gzip data");var t=r[3],e=10;t&4&&(e+=(r[10]|r[11]<<8)+2);for(var n=(t>>3&1)+(t>>4&1);n>0;n-=!r[e++]);return e+(t&2)},Bt=function(r){var t=r.length;return(r[t-4]|r[t-3]<<8|r[t-2]<<16|r[t-1]<<24)>>>0};function dt(r,t){var e=Ot(r);return e+8>r.length&&m(6,"invalid gzip data"),$t(r.subarray(e,-8),{i:2},t&&t.out||new v(Bt(r)),t&&t.dictionary)}var Ct=typeof TextDecoder<"u"&&new TextDecoder,It=0;try{Ct.decode(Pt,{stream:!0}),It=1}catch{}var A=class r{static getInstance(t){let e="Surge";return typeof $loon<"u"?e="Loon":typeof $task<"u"&&(e="QuantumultX"),r.instances[e]||(r.instances[e]=r.classNames[e](t,e)),r.instances[e]}static classNames={Surge:(t,e)=>new O(t,e),Loon:(t,e)=>new W(t,e),QuantumultX:(t,e)=>new K(t,e)};static instances={};className;name;logLevels={debug:1,info:2,warn:3,error:4,off:5};logLevel=this.logLevels.info;request;response;argument;_url;get url(){return this._url||(this._url=new URL(this.request.url)),this._url}constructor(t,e){this.className=e??"",this.name=t??"",this.init()}createProxy(t){return new Proxy(t,{get:this.getFn,set:this.setFn})}getFn(t,e,n){return Reflect.get(t,e,n)}setFn(t,e,n,i){return Reflect.set(t,e,n,i),!0}getJSON(t){let e=this.getVal(t);return e?JSON.parse(e):null}setJSON(t,e){this.setVal(JSON.stringify(t),e)}logWithPrefix(t,e){console.log(`${t}${e.map(n=>typeof n=="object"?JSON.stringify(n):n).join(`
`)}`)}log(...t){this.logWithPrefix("",t)}debug(...t){this.logLevel>this.logLevels.debug||this.logWithPrefix("[DEBUG]",t)}info(...t){this.logLevel>this.logLevels.info||this.logWithPrefix("[INFO]",t)}warn(...t){this.logLevel>this.logLevels.warn||this.logWithPrefix("[WARN]",t)}error(...t){this.logLevel>this.logLevels.error||this.logWithPrefix("[ERROR]",t)}exit(){$done({})}abort(){$done()}createCaseInsensitiveDictionary(t={}){let e=Object.create(null),n=s=>typeof s=="string"?s.toLowerCase():s;for(let[s,a]of Object.entries(t))e[n(s)]=a;let i={get(s,a){return Reflect.get(s,n(a))},set(s,a,l){return Reflect.set(s,n(a),l)},has(s,a){return Reflect.has(s,n(a))},deleteProperty(s,a){return Reflect.deleteProperty(s,n(a))},ownKeys(s){return Reflect.ownKeys(s)},getOwnPropertyDescriptor(s,a){return Reflect.getOwnPropertyDescriptor(s,n(a))},defineProperty(s,a,l){return Reflect.defineProperty(s,n(a),l)}};return new Proxy(e,i)}},O=class r extends A{static propertyMap={bodyBytes:"body"};getFn(t,e,n){let i=r.propertyMap[e]||e;return super.getFn(t,i,n)}setFn(t,e,n,i){let s=r.propertyMap[e]||e;return super.setFn(t,s,n,i)}init(){typeof $request=="object"&&(this.request=this.createProxy($request)),typeof $response=="object"&&(this.response=this.createProxy($response)),typeof $argument=="string"&&(this.argument=JSON.parse($argument),"logLevel"in this.argument&&(this.logLevel=this.logLevels[this.argument.logLevel]??this.logLevels.info))}getVal(t){return $persistentStore.read(t)}setVal(t,e){return $persistentStore.write(t,e)}fetch(t){let{method:e,body:n,timeout:i=5,...s}=t;return new Promise((a,l)=>{$httpClient[e]({...s,body:n,"binary-mode":n instanceof Uint8Array,timeout:i},(h,p,c)=>{if(h)return l(h);let o=c instanceof Uint8Array?"bodyBytes":"body";a({status:p.status,headers:p.headers,[o]:c})})})}notify(t=this.name,e="",n="",i={}){let{openUrl:s,clipboard:a,mediaUrl:l,dismiss:h,sound:p=!0}=i,c={url:s,text:a,"media-url":l,"auto-dismiss":h,sound:p};s?c.action="open-url":a&&(c.action="clipboard"),$notification.post(t,e,n,c)}ungzip(t){return $utils.ungzip(t)}done(t){$done(t)}abort(){$done({abort:!0})}},W=class extends O{init(){super.init(),typeof $argument=="object"&&(this.argument=$argument,"logLevel"in this.argument&&(this.logLevel=this.logLevels[this.argument.logLevel]??this.logLevels.info))}fetch(t){return t.timeout=(t.timeout??5)*1e3,super.fetch(t)}notify(t=this.name,e="",n="",i={}){let{openUrl:s,mediaUrl:a,clipboard:l,delay:h}=i,p={openUrl:s,mediaUrl:a,clipboard:l};$notification.post(t,e,n,p,h)}abort(){$done()}},K=class r extends A{static propertyMap={status:"statusCode"};static toUint8Array(t){return t&&new Uint8Array(t)}static toArrayBuffer(t){return t.buffer.slice(t.byteOffset,t.byteLength+t.byteOffset)}getFn(t,e,n){let i=r.propertyMap[e]||e,s=super.getFn(t,i,n);return e==="bodyBytes"?r.toUint8Array(s):s}init(){typeof $request=="object"&&(this.request=this.createProxy($request)),typeof $response=="object"&&(this.response=this.createProxy($response))}getVal(t){return $prefs.valueForKey(t)}setVal(t,e){return $prefs.setValueForKey(t,e)}fetch(t){let e={url:"",method:"GET"};for(let[n,i]of Object.entries(t))n==="body"&&i instanceof Uint8Array?e.bodyBytes=r.toArrayBuffer(i):n==="method"?e.method=i.toUpperCase():e[n]=i;return new Promise((n,i)=>{$task.fetch(e).then(s=>{n(this.createProxy(s))},s=>{i(s)})})}notify(t=this.name,e="",n="",i={}){let{openUrl:s,mediaUrl:a,clipboard:l}=i,h={"open-url":s,"media-url":a,"update-pasteboard":l};$notify(t,e,n,h)}ungzip(t){return dt(t)}done(t){let e=t.response??t,n={};for(let[i,s]of Object.entries(e))i==="status"?n.status=`HTTP/1.1 ${s}`:i==="body"&&s instanceof Uint8Array?n.bodyBytes=r.toArrayBuffer(s):n[i]=s;$done(n)}};var H=class{},B=class extends H{message;constructor(t){super(),this.message=this.fromJsonString(t)}fromJsonString(t){return JSON.parse(t)}toJsonString(){return JSON.stringify(this.message)}};var w=A.getInstance("12306");function wt(r){return r.endsWith("/getAdList")?new Y(w.request.body):r.endsWith("/mgw.htm")?new _:null}var Y=class extends B{done(){w.done({response:{body:this.getResponseBody()}})}getResponseBody(){let{placementNo:t}=this.message;switch(t){case"0007":return'{"materialsList":[{"billMaterialsId":"1","filePath":"#","creativeType":1}],"advertParam":{"skipTime":1}}';case"G0054":return'{"code":"00","materialsList":[{}]}';default:return'{"code":"00","message":"0"}'}}},_=class extends H{filterList=["com.cars.otsmobile.newHomePageBussData"];done(){this.isAd()?w.abort():w.exit()}isAd(){let t=w.createCaseInsensitiveDictionary(w.request.headers);return this.filterList.includes(t["operation-type"])}};try{wt(w.request.url)?.done()}catch(r){w.error(r)}finally{w.exit()}})();
