// Build: 2025/7/13 18:30:33
(()=>{var v=Uint8Array,b=Uint16Array,Tt=Int32Array,ht=new v([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ct=new v([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ft=new v([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vt=function(r,t){for(var e=new b(31),i=0;i<31;++i)e[i]=t+=1<<r[i-1];for(var n=new Tt(e[30]),i=1;i<30;++i)for(var s=e[i];s<e[i+1];++s)n[s]=s-e[i]<<5|i;return{b:e,r:n}},pt=vt(ht,2),gt=pt.b,Dt=pt.r;gt[28]=258,Dt[258]=28;var yt=vt(ct,0),Mt=yt.b,Et=yt.r,V=new b(32768);for(a=0;a<32768;++a)x=(a&43690)>>1|(a&21845)<<1,x=(x&52428)>>2|(x&13107)<<2,x=(x&61680)>>4|(x&3855)<<4,V[a]=((x&65280)>>8|(x&255)<<8)>>1;var x,a,q=function(r,t,e){for(var i=r.length,n=0,s=new b(t);n<i;++n)r[n]&&++s[r[n]-1];var u=new b(t);for(n=1;n<t;++n)u[n]=u[n-1]+s[n-1]<<1;var l;if(e){l=new b(1<<t);var h=15-t;for(n=0;n<i;++n)if(r[n])for(var p=n<<4|r[n],c=t-r[n],o=u[r[n]-1]++<<c,f=o|(1<<c)-1;o<=f;++o)l[V[o]>>h]=p}else for(l=new b(i),n=0;n<i;++n)r[n]&&(l[n]=V[u[r[n]-1]++]>>15-r[n]);return l},$=new v(288);for(a=0;a<144;++a)$[a]=8;var a;for(a=144;a<256;++a)$[a]=9;var a;for(a=256;a<280;++a)$[a]=7;var a;for(a=280;a<288;++a)$[a]=8;var a,mt=new v(32);for(a=0;a<32;++a)mt[a]=5;var a;var qt=q($,9,1);var $t=q(mt,5,1),X=function(r){for(var t=r[0],e=1;e<r.length;++e)r[e]>t&&(t=r[e]);return t},y=function(r,t,e){var i=t/8|0;return(r[i]|r[i+1]<<8)>>(t&7)&e},J=function(r,t){var e=t/8|0;return(r[e]|r[e+1]<<8|r[e+2]<<16)>>(t&7)},Lt=function(r){return(r+7)/8|0},Pt=function(r,t,e){return(t==null||t<0)&&(t=0),(e==null||e>r.length)&&(e=r.length),new v(r.subarray(t,e))};var Ht=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],m=function(r,t,e){var i=new Error(t||Ht[r]);if(i.code=r,Error.captureStackTrace&&Error.captureStackTrace(i,m),!e)throw i;return i},Ot=function(r,t,e,i){var n=r.length,s=i?i.length:0;if(!n||t.f&&!t.l)return e||new v(0);var u=!e,l=u||t.i!=2,h=t.i;u&&(e=new v(n*3));var p=function(ft){var ut=e.length;if(ft>ut){var lt=new v(Math.max(ut*2,ft));lt.set(e),e=lt}},c=t.f||0,o=t.p||0,f=t.b||0,R=t.l,P=t.d,T=t.m,F=t.n,C=n*8;do{if(!R){c=y(r,o,1);var I=y(r,o+1,3);if(o+=3,I)if(I==1)R=qt,P=$t,T=9,F=5;else if(I==2){var E=y(r,o,31)+257,tt=y(r,o+10,15)+4,et=E+y(r,o+5,31)+1;o+=14;for(var D=new v(et),Z=new v(19),g=0;g<tt;++g)Z[Ft[g]]=y(r,o+g*3,7);o+=tt*3;for(var rt=X(Z),Rt=(1<<rt)-1,At=q(Z,rt,1),g=0;g<et;){var nt=At[y(r,o,Rt)];o+=nt&15;var d=nt>>4;if(d<16)D[g++]=d;else{var S=0,H=0;for(d==16?(H=3+y(r,o,3),o+=2,S=D[g-1]):d==17?(H=3+y(r,o,7),o+=3):d==18&&(H=11+y(r,o,127),o+=7);H--;)D[g++]=S}}var it=D.subarray(0,E),z=D.subarray(E);T=X(it),F=X(z),R=q(it,T,1),P=q(z,F,1)}else m(1);else{var d=Lt(o)+4,j=r[d-4]|r[d-3]<<8,N=d+j;if(N>n){h&&m(0);break}l&&p(f+j),e.set(r.subarray(d,N),f),t.b=f+=j,t.p=o=N*8,t.f=c;continue}if(o>C){h&&m(0);break}}l&&p(f+131072);for(var St=(1<<T)-1,Ut=(1<<F)-1,k=o;;k=o){var S=R[J(r,o)&St],U=S>>4;if(o+=S&15,o>C){h&&m(0);break}if(S||m(2),U<256)e[f++]=U;else if(U==256){k=o,R=null;break}else{var st=U-254;if(U>264){var g=U-257,M=ht[g];st=y(r,o,(1<<M)-1)+gt[g],o+=M}var G=P[J(r,o)&Ut],Q=G>>4;G||m(3),o+=G&15;var z=Mt[Q];if(Q>3){var M=ct[Q];z+=J(r,o)&(1<<M)-1,o+=M}if(o>C){h&&m(0);break}l&&p(f+131072);var ot=f+st;if(f<z){var at=s-z,bt=Math.min(z,ot);for(at+f<0&&m(3);f<bt;++f)e[f]=i[at+f]}for(;f<ot;++f)e[f]=e[f-z]}}t.l=R,t.p=k,t.b=f,t.f=c,R&&(c=1,t.m=T,t.d=P,t.n=F)}while(!c);return f!=e.length&&u?Pt(e,0,f):e.subarray(0,f)};var Bt=new v(0);var Ct=function(r){(r[0]!=31||r[1]!=139||r[2]!=8)&&m(6,"invalid gzip data");var t=r[3],e=10;t&4&&(e+=(r[10]|r[11]<<8)+2);for(var i=(t>>3&1)+(t>>4&1);i>0;i-=!r[e++]);return e+(t&2)},It=function(r){var t=r.length;return(r[t-4]|r[t-3]<<8|r[t-2]<<16|r[t-1]<<24)>>>0};function dt(r,t){var e=Ct(r);return e+8>r.length&&m(6,"invalid gzip data"),Ot(r.subarray(e,-8),{i:2},t&&t.out||new v(It(r)),t&&t.dictionary)}var jt=typeof TextDecoder<"u"&&new TextDecoder,Nt=0;try{jt.decode(Bt,{stream:!0}),Nt=1}catch{}function wt(r={}){let t=Object.create(null),e=n=>typeof n=="string"?n.toLowerCase():n;for(let[n,s]of Object.entries(r))t[e(n)]=s;let i={get(n,s){return Reflect.get(n,e(s))},set(n,s,u){return Reflect.set(n,e(s),u)},has(n,s){return Reflect.has(n,e(s))},deleteProperty(n,s){return Reflect.deleteProperty(n,e(s))},ownKeys(n){return Reflect.ownKeys(n)},getOwnPropertyDescriptor(n,s){return Reflect.getOwnPropertyDescriptor(n,e(s))},defineProperty(n,s,u){return Reflect.defineProperty(n,e(s),u)}};return new Proxy(t,i)}function xt(r){if(typeof r!="object"||r===null)return String(r);if(typeof r.toString=="function"&&r.toString!==Object.prototype.toString||r instanceof RegExp)return r.toString();if(r instanceof Date)return r.toISOString();try{return JSON.stringify(r)}catch{return"[Unserializable Object]"}}var A=class r{static getInstance(t){let e="Surge";return typeof $loon<"u"?e="Loon":typeof $task<"u"&&(e="QuantumultX"),r.instances[e]||(r.instances[e]=r.classNames[e](t,e)),r.instances[e]}static classNames={Surge:(t,e)=>new O(t,e),Loon:(t,e)=>new W(t,e),QuantumultX:(t,e)=>new K(t,e)};static instances={};className;name;logLevels={debug:1,info:2,warn:3,error:4,off:5};logLevel=this.logLevels.error;request;response;argument;_url;get url(){return this._url||(this._url=new URL(this.request.url)),this._url}constructor(t,e){this.className=e??"",this.name=t??"",this.init()}createProxy(t){return new Proxy(t,{get:this.getFn,set:this.setFn})}getFn(t,e,i){return Reflect.get(t,e,i)}setFn(t,e,i,n){return Reflect.set(t,e,i,n),!0}getJSON(t){let e=this.getVal(t);return e?JSON.parse(e):null}setJSON(t,e){this.setVal(JSON.stringify(t),e)}logWithPrefix(t,e){console.log(`${t}${e.map(i=>xt(i)).join(" | ")}`)}log(...t){this.logWithPrefix("",t)}debug(...t){this.logLevel>this.logLevels.debug||this.logWithPrefix("[DEBUG]",t)}info(...t){this.logLevel>this.logLevels.info||this.logWithPrefix("[INFO]",t)}warn(...t){this.logLevel>this.logLevels.warn||this.logWithPrefix("[WARN]",t)}error(...t){this.logLevel>this.logLevels.error||this.logWithPrefix("[ERROR]",t)}exit(){$done({})}abort(){$done()}},O=class r extends A{static propertyMap={bodyBytes:"body"};getFn(t,e,i){let n=r.propertyMap[e]||e;return super.getFn(t,n,i)}setFn(t,e,i,n){let s=r.propertyMap[e]||e;return super.setFn(t,s,i,n)}init(){typeof $request=="object"&&(this.request=this.createProxy($request)),typeof $response=="object"&&(this.response=this.createProxy($response)),typeof $argument=="string"&&(this.argument=JSON.parse($argument),"logLevel"in this.argument&&(this.logLevel=this.logLevels[this.argument.logLevel]??this.logLevels.info))}getVal(t){return $persistentStore.read(t)}setVal(t,e){return $persistentStore.write(t,e)}fetch(t){let{method:e,body:i,timeout:n=5,...s}=t;return new Promise((u,l)=>{$httpClient[e]({...s,body:i,"binary-mode":i instanceof Uint8Array,timeout:n},(h,p,c)=>{if(h)return l(h);let o=c instanceof Uint8Array?"bodyBytes":"body";u({status:p.status,headers:p.headers,[o]:c})})})}notify(t=this.name,e="",i="",n={}){let{openUrl:s,clipboard:u,mediaUrl:l,dismiss:h,sound:p=!0}=n,c={url:s,text:u,"media-url":l,"auto-dismiss":h,sound:p};s?c.action="open-url":u&&(c.action="clipboard"),$notification.post(t,e,i,c)}ungzip(t){return $utils.ungzip(t)}done(t){$done(t)}abort(){$done({abort:!0})}},W=class extends O{init(){super.init(),typeof $argument=="object"&&(this.argument=$argument,"logLevel"in this.argument&&(this.logLevel=this.logLevels[this.argument.logLevel]??this.logLevels.info))}fetch(t){return t.timeout=(t.timeout??5)*1e3,super.fetch(t)}notify(t=this.name,e="",i="",n={}){let{openUrl:s,mediaUrl:u,clipboard:l,delay:h}=n,p={openUrl:s,mediaUrl:u,clipboard:l};$notification.post(t,e,i,p,h)}abort(){$done()}},K=class r extends A{static propertyMap={status:"statusCode"};static toUint8Array(t){return t&&new Uint8Array(t)}static toArrayBuffer(t){return t.buffer.slice(t.byteOffset,t.byteLength+t.byteOffset)}logLevel=this.logLevels.info;getFn(t,e,i){let n=r.propertyMap[e]||e,s=super.getFn(t,n,i);return e==="bodyBytes"?r.toUint8Array(s):s}init(){typeof $request=="object"&&(this.request=this.createProxy($request)),typeof $response=="object"&&(this.response=this.createProxy($response))}getVal(t){return $prefs.valueForKey(t)}setVal(t,e){return $prefs.setValueForKey(t,e)}fetch(t){let e={url:"",method:"GET"};for(let[i,n]of Object.entries(t))i==="body"&&n instanceof Uint8Array?e.bodyBytes=r.toArrayBuffer(n):i==="method"?e.method=n.toUpperCase():e[i]=n;return new Promise((i,n)=>{$task.fetch(e).then(s=>{i(this.createProxy(s))},s=>{n(s)})})}notify(t=this.name,e="",i="",n={}){let{openUrl:s,mediaUrl:u,clipboard:l}=n,h={"open-url":s,"media-url":u,"update-pasteboard":l};$notify(t,e,i,h)}ungzip(t){return dt(t)}done(t){let e=t.response??t,i={};for(let[n,s]of Object.entries(e))n==="status"?i.status=`HTTP/1.1 ${s}`:n==="body"&&s instanceof Uint8Array?i.bodyBytes=r.toArrayBuffer(s):i[n]=s;$done(i)}};var L=class{},B=class extends L{message;constructor(t){super(),this.message=this.fromJsonString(t)}fromJsonString(t){return JSON.parse(t)}toJsonString(){return JSON.stringify(this.message)}};var w=A.getInstance("12306");function zt(r){return r.endsWith("/getAdList")?new Y(w.request.body):r.endsWith("/mgw.htm")?new _:null}var Y=class extends B{done(){w.done({response:{body:this.getResponseBody()}})}getResponseBody(){let{placementNo:t}=this.message;switch(t){case"0007":return'{"materialsList":[{"billMaterialsId":"1","filePath":"#","creativeType":1}],"advertParam":{"skipTime":1}}';case"G0054":return'{"code":"00","materialsList":[{}]}';default:return'{"code":"00","message":"0"}'}}},_=class extends L{filterList=["com.cars.otsmobile.newHomePageBussData"];done(){this.isAd()?w.abort():w.exit()}isAd(){let t=wt(w.request.headers);return this.filterList.includes(t["operation-type"])}};try{zt(w.request.url)?.done()}catch(r){w.error(r,w.request.url)}finally{w.exit()}})();
